<div class="card flex justify-center">
    <p-dialog header="Tạo người dùng mới" [modal]="true" [(visible)]="visible" 
              [style]="{ width: '50rem' }" [breakpoints]="{ '960px': '75vw', '640px': '90vw' }"
              styleClass="custom-dialog">
        <form [formGroup]="userForm" class="space-y-6 p-4">
            <!-- Name Field -->
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-6">
                    <label for="name" class="font-semibold w-32 text-gray-700">Tên</label>
                    <input pInputText id="name" class="flex-1 min-w-0" autocomplete="off" formControlName="name"
                           [ngClass]="{'p-invalid': userForm.get('name')?.invalid && (userForm.get('name')?.dirty || userForm.get('name')?.touched)}"/>
                </div>
                <div *ngIf="userForm.get('name')?.invalid && (userForm.get('name')?.dirty || userForm.get('name')?.touched)" 
                     class="ml-40 text-sm text-red-600">
                    <div *ngIf="userForm.get('name')?.errors?.['required']">Tên là bắt buộc</div>
                    <div *ngIf="userForm.get('name')?.errors?.['minlength']">Tên phải có ít nhất 3 ký tự</div>
                </div>
            </div>

            <!-- Email Field -->
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-6">
                    <label for="email" class="font-semibold w-32 text-gray-700">Email</label>
                    <input pInputText id="email" class="flex-1 min-w-0" autocomplete="off" formControlName="email"
                           [ngClass]="{'p-invalid': userForm.get('email')?.invalid && (userForm.get('email')?.dirty || userForm.get('email')?.touched)}"/>
                </div>
                <div *ngIf="userForm.get('email')?.invalid && (userForm.get('email')?.dirty || userForm.get('email')?.touched)" 
                     class="ml-40 text-sm text-red-600">
                    <div *ngIf="userForm.get('email')?.errors?.['required']">Email là bắt buộc</div>
                    <div *ngIf="userForm.get('email')?.errors?.['pattern']">Email không hợp lệ</div>
                </div>
            </div>

            <!-- Role Field -->
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-6">
                    <label for="role" class="font-semibold w-32 text-gray-700">Vai trò</label>
                    <p-select [options]="roles" formControlName="role" optionLabel="name" optionValue="value"
                              placeholder="Chọn Vai Trò" class="flex-1 min-w-0"
                              [ngClass]="{'p-invalid': userForm.get('role')?.invalid && (userForm.get('role')?.dirty || userForm.get('role')?.touched)}"></p-select>
                </div>
                <div *ngIf="userForm.get('role')?.invalid && (userForm.get('role')?.dirty || userForm.get('role')?.touched)" 
                     class="ml-40 text-sm text-red-600">
                    <div *ngIf="userForm.get('role')?.errors?.['required']">Vai trò là bắt buộc</div>
                </div>
            </div>

            <!-- Phone Number Field -->
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-6">
                    <label for="phoneNumber" class="font-semibold w-32 text-gray-700">Số điện thoại</label>
                    <input pInputText id="phoneNumber" class="flex-1 min-w-0" autocomplete="off" formControlName="phoneNumber"
                           [ngClass]="{'p-invalid': userForm.get('phoneNumber')?.invalid && (userForm.get('phoneNumber')?.dirty || userForm.get('phoneNumber')?.touched)}"/>
                </div>
                <div *ngIf="userForm.get('phoneNumber')?.invalid && (userForm.get('phoneNumber')?.dirty || userForm.get('phoneNumber')?.touched)"
                     class="ml-40 text-sm text-red-600">
                    <div *ngIf="userForm.get('phoneNumber')?.errors?.['required']">Số điện thoại là bắt buộc</div>
                    <div *ngIf="userForm.get('phoneNumber')?.errors?.['pattern']">Số điện thoại không hợp lệ</div>
                </div>
            </div>

            <!-- Address Field -->
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-6">
                    <label for="address" class="font-semibold w-32 text-gray-700">Địa chỉ</label>
                    <input pInputText id="address" class="flex-1 min-w-0" autocomplete="off" formControlName="address"
                           [ngClass]="{'p-invalid': userForm.get('address')?.invalid && (userForm.get('address')?.dirty || userForm.get('address')?.touched)}"/>
                </div>
                <div *ngIf="userForm.get('address')?.invalid && (userForm.get('address')?.dirty || userForm.get('address')?.touched)" 
                     class="ml-40 text-sm text-red-600">
                    <div *ngIf="userForm.get('address')?.errors?.['required']">Địa chỉ là bắt buộc</div>
                </div>
            </div>

            <!-- Buttons -->
            <div class="flex justify-end gap-4 pt-6 mt-6 border-t border-gray-200">
                <p-button label="Hủy" severity="secondary" (click)="closeDialog()" 
                          styleClass="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200"/>
                <p-button label="Tạo mới" (click)="createUser()" [disabled]="userForm.invalid"
                          styleClass="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200"/>
            </div>
        </form>
    </p-dialog>
</div>